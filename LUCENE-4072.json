{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12556794","self":"https://issues.apache.org/jira/rest/api/latest/issue/12556794","key":"LUCENE-4072","fields":{"summary":"CharFilter that Unicode-normalizes input","progress":{"progress":0,"total":0},"timetracking":{},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/2","id":"2","description":"A new feature of the product, which has yet to be developed.","iconUrl":"https://issues.apache.org/jira/images/icons/newfeature.gif","name":"New Feature","subtask":false},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LUCENE-4072/votes","votes":0,"hasVoted":false},"fixVersions":[],"resolution":null,"resolutiondate":null,"timespent":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ippei","name":"ippei","emailAddress":"ippei_ukai@mac.com","avatarUrls":{"16x16":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452"},"displayName":"Ippei UKAI","active":true},"aggregatetimeoriginalestimate":null,"customfield_12310120":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10121","value":"New","id":"10121"}],"created":"2012-05-22T13:07:13.209+1100","updated":"2012-05-27T00:25:38.768+1100","description":"I'd like to contribute a CharFilter that Unicode-normalizes input with ICU4J.\r\n\r\nThe benefit of having this process as CharFilter is that tokenizer can work on normalised text while offset-correction ensuring fast vector highlighter and other offset-dependent features do not break.\r\n\r\nThe implementation is available at following repository:\r\nhttps://github.com/ippeiukai/ICUNormalizer2CharFilter\r\n\r\nUnfortunately this is my unpaid side-project and cannot spend much time to merge my work to Lucene to make appropriate patch. I'd appreciate it if anyone could give it a go. I'm happy to relicense it to whatever that meets your needs.","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priority_major.gif","name":"Major","id":"3"},"duedate":null,"issuelinks":[],"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LUCENE-4072/watchers","watchCount":1,"isWatching":false},"customfield_12310291":null,"worklog":{"startAt":0,"maxResults":0,"total":0,"worklogs":[]},"customfield_12310290":null,"subtasks":[],"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/status_open.gif","name":"Open","id":"1"},"labels":[],"workratio":-1,"assignee":null,"customfield_12310222":null,"customfield_12310220":"2012-05-22 13:40:25.88","aggregatetimeestimate":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/LUCENE","id":"12310110","key":"LUCENE","name":"Lucene - Core","avatarUrls":{"16x16":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310110&avatarId=10061","48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310110&avatarId=10061"}},"versions":[],"environment":null,"timeestimate":null,"aggregateprogress":{"progress":0,"total":0},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12310230","id":"12310230","name":"modules/analysis","description":"issues related to analysis module"}],"comment":{"startAt":0,"maxResults":7,"total":7,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12556794/comment/13280687","id":"13280687","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir@gmail.com","avatarUrls":{"16x16":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"This looks cool: it looked tricky to me to implement that iterative normalization api, I'm glad you tackled it :)\r\n\r\nIts a good idea, for some tokenizers like Ngrams etc you really need normalization as a charfilter.\r\n\r\nI'll see if i can help with the integration.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir@gmail.com","avatarUrls":{"16x16":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2012-05-22T13:40:25.880+1100","updated":"2012-05-22T13:40:25.880+1100"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12556794/comment/13280905","id":"13280905","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir@gmail.com","avatarUrls":{"16x16":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"Hello, if you are willing to contribute this under the Apache license (http://www.apache.org/licenses/LICENSE-2.0.html), would\r\nyou mind uploading a .zip file of your codebase (git has a button to create it), and check the box \"Grant license to ASF for inclusion in ASF works\"\r\nwhen doing the upload? \r\n\r\nThen I can help turn it into a patch. Thanks again!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir@gmail.com","avatarUrls":{"16x16":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2012-05-22T23:16:24.640+1100","updated":"2012-05-22T23:16:24.640+1100"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12556794/comment/13281376","id":"13281376","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ippei","name":"ippei","emailAddress":"ippei_ukai@mac.com","avatarUrls":{"16x16":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452"},"displayName":"Ippei UKAI","active":true},"body":"Robert,\r\nThe zipped copy of the repository is attached and licensed to ASF for inclusion.\r\nThanks!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ippei","name":"ippei","emailAddress":"ippei_ukai@mac.com","avatarUrls":{"16x16":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452"},"displayName":"Ippei UKAI","active":true},"created":"2012-05-23T13:50:35.029+1100","updated":"2012-05-23T13:50:35.029+1100"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12556794/comment/13283495","id":"13283495","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir@gmail.com","avatarUrls":{"16x16":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"attached is the filter, turned into a patch.\r\n\r\nhowever, I added an additional random test and it currently fails... will look into this more.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir@gmail.com","avatarUrls":{"16x16":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2012-05-26T01:45:40.832+1100","updated":"2012-05-26T01:45:40.832+1100"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12556794/comment/13283943","id":"13283943","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ippei","name":"ippei","emailAddress":"ippei_ukai@mac.com","avatarUrls":{"16x16":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452"},"displayName":"Ippei UKAI","active":true},"body":"I've backported your additional test case of random string and reproduced the problem.\r\nHowever, I haven't managed to pin point the problem so far. Having no clue coming out of AssertionError, attacking LUCENE-3900 first might be more productive.\r\n\r\nThis final offset thing looks like a common occurrence among CharFilters (re LUCENE-3820 LUCENE-3971) but I'm yet to find a common theme in them.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ippei","name":"ippei","emailAddress":"ippei_ukai@mac.com","avatarUrls":{"16x16":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452"},"displayName":"Ippei UKAI","active":true},"created":"2012-05-26T20:29:11.521+1100","updated":"2012-05-26T20:29:11.521+1100"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12556794/comment/13283977","id":"13283977","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ippei","name":"ippei","emailAddress":"ippei_ukai@mac.com","avatarUrls":{"16x16":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452"},"displayName":"Ippei UKAI","active":true},"body":"I've found a problem:\r\n\r\nIn ICUNormalizer2CharFilter#recordOffsetDiff(int,int), the positive diff case should look like following. \r\n<pre>\r\n      addOffCorrectMap(charCount + Math.min(1, outputLength), cumuDiff + diff);\r\n</pre>\r\n\r\nHopefully, there won't be more.\r\n\r\nI do grant license to ASF to include the above line in ASF works (as per the Apache License ยง5)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ippei","name":"ippei","emailAddress":"ippei_ukai@mac.com","avatarUrls":{"16x16":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452"},"displayName":"Ippei UKAI","active":true},"created":"2012-05-27T00:17:34.954+1100","updated":"2012-05-27T00:25:38.753+1100"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12556794/comment/13283978","id":"13283978","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ippei","name":"ippei","emailAddress":"ippei_ukai@mac.com","avatarUrls":{"16x16":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452"},"displayName":"Ippei UKAI","active":true},"body":"How I debugged for a reference.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ippei","name":"ippei","emailAddress":"ippei_ukai@mac.com","avatarUrls":{"16x16":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452"},"displayName":"Ippei UKAI","active":true},"created":"2012-05-27T00:22:21.792+1100","updated":"2012-05-27T00:22:21.792+1100"}]},"customfield_10010":null,"customfield_12310310":"3.0","timeoriginalestimate":null,"aggregatetimespent":null}}